

const coffee = [
  {
    "name": "Irish coffee",
    "description": "Fragrant black coffee with Jameson Irish whiskey and whipped milk",
    "price": "7.00",
    "category": "coffee",
    "sizes": {
      "s": {
        "size": "200 ml",
        "add-price": "0.00"
      },
      "m": {
        "size": "300 ml",
        "add-price": "0.50"
      },
      "l": {
        "size": "400 ml",
        "add-price": "1.00"
      }
    },
    "additives": [
      {
        "name": "Sugar",
        "add-price": "0.50"
      },
      {
        "name": "Cinnamon",
        "add-price": "0.60"
      },
      {
        "name": "Syrup",
        "add-price": "0.70"
      }
    ]
  },

  {
    "name": "Kahlua coffee",
    "description": "Classic coffee with milk and Kahlua liqueur under a cap of frothed milk",
    "price": "7.00",
    "category": "coffee",
    "sizes": {
      "s": {
        "size": "200 ml",
        "add-price": "0.00"
      },
      "m": {
        "size": "300 ml",
        "add-price": "0.50"
      },
      "l": {
        "size": "400 ml",
        "add-price": "1.00"
      }
    },
    "additives": [
      {
        "name": "Sugar",
        "add-price": "0.50"
      },
      {
        "name": "Cinnamon",
        "add-price": "0.50"
      },
      {
        "name": "Syrup",
        "add-price": "0.50"
      }
    ]
  },

  {
    "name": "Honey raf",
    "description": "Espresso with frothed milk, cream and aromatic honey",
    "price": "5.50",
    "category": "coffee",
    "sizes": {
      "s": {
        "size": "200 ml",
        "add-price": "0.00"
      },
      "m": {
        "size": "300 ml",
        "add-price": "0.50"
      },
      "l": {
        "size": "400 ml",
        "add-price": "1.00"
      }
    },
    "additives": [
      {
        "name": "Sugar",
        "add-price": "0.50"
      },
      {
        "name": "Cinnamon",
        "add-price": "0.50"
      },
      {
        "name": "Syrup",
        "add-price": "0.50"
      }
    ]
  },

  {
    "name": "Ice cappuccino",
    "description": "Cappuccino with soft thick foam in summer version with ice",
    "price": "5.00",
    "category": "coffee",
    "sizes": {
      "s": {
        "size": "200 ml",
        "add-price": "0.00"
      },
      "m": {
        "size": "300 ml",
        "add-price": "0.50"
      },
      "l": {
        "size": "400 ml",
        "add-price": "1.00"
      }
    },
    "additives": [
      {
        "name": "Sugar",
        "add-price": "0.50"
      },
      {
        "name": "Cinnamon",
        "add-price": "0.50"
      },
      {
        "name": "Syrup",
        "add-price": "0.50"
      }
    ]
  },

  {
    "name": "Espresso",
    "description": "Classic black coffee",
    "price": "4.50",
    "category": "coffee",
    "sizes": {
      "s": {
        "size": "200 ml",
        "add-price": "0.00"
      },
      "m": {
        "size": "300 ml",
        "add-price": "0.50"
      },
      "l": {
        "size": "400 ml",
        "add-price": "1.00"
      }
    },
    "additives": [
      {
        "name": "Sugar",
        "add-price": "0.50"
      },
      {
        "name": "Cinnamon",
        "add-price": "0.50"
      },
      {
        "name": "Syrup",
        "add-price": "0.50"
      }
    ]
  },

  {
    "name": "Latte",
    "description": "Espresso coffee with the addition of steamed milk and dense milk foam",
    "price": "5.50",
    "category": "coffee",
    "sizes": {
      "s": {
        "size": "200 ml",
        "add-price": "0.00"
      },
      "m": {
        "size": "300 ml",
        "add-price": "0.50"
      },
      "l": {
        "size": "400 ml",
        "add-price": "1.00"
      }
    },
    "additives": [
      {
        "name": "Sugar",
        "add-price": "0.50"
      },
      {
        "name": "Cinnamon",
        "add-price": "0.50"
      },
      {
        "name": "Syrup",
        "add-price": "0.50"
      }
    ]
  },

  {
    "name": "Latte macchiato",
    "description": "Espresso with frothed milk and chocolate",
    "price": "5.50",
    "category": "coffee",
    "sizes": {
      "s": {
        "size": "200 ml",
        "add-price": "0.00"
      },
      "m": {
        "size": "300 ml",
        "add-price": "0.50"
      },
      "l": {
        "size": "400 ml",
        "add-price": "1.00"
      }
    },
    "additives": [
      {
        "name": "Sugar",
        "add-price": "0.50"
      },
      {
        "name": "Cinnamon",
        "add-price": "0.50"
      },
      {
        "name": "Syrup",
        "add-price": "0.50"
      }
    ]
  },

  {
    "name": "Coffee with cognac",
    "description": "Fragrant black coffee with cognac and whipped cream",
    "price": "6.50",
    "category": "coffee",
    "sizes": {
      "s": {
        "size": "200 ml",
        "add-price": "0.00"
      },
      "m": {
        "size": "300 ml",
        "add-price": "0.50"
      },
      "l": {
        "size": "400 ml",
        "add-price": "1.00"
      }
    },
    "additives": [
      {
        "name": "Sugar",
        "add-price": "0.50"
      },
      {
        "name": "Cinnamon",
        "add-price": "0.50"
      },
      {
        "name": "Syrup",
        "add-price": "0.50"
      }
    ]
  },


]
const dessert = [
  {
    "name": "Marble cheesecake",
    "description": "Philadelphia cheese with lemon zest on a light sponge cake and red currant jam",
    "price": "3.50",
    "category": "dessert",
    "sizes": {
      "s": {
        "size": "50 g",
        "add-price": "0.00"
      },
      "m": {
        "size": "100 g",
        "add-price": "0.50"
      },
      "l": {
        "size": "200 g",
        "add-price": "1.00"
      }
    },
    "additives": [
      {
        "name": "Berries",
        "add-price": "0.50"
      },
      {
        "name": "Nuts",
        "add-price": "0.50"
      },
      {
        "name": "Jam",
        "add-price": "0.50"
      }
    ]
  },

  {
    "name": "Red velvet",
    "description": "Layer cake with cream cheese frosting",
    "price": "4.00",
    "category": "dessert",
    "sizes": {
      "s": {
        "size": "50 g",
        "add-price": "0.00"
      },
      "m": {
        "size": "100 g",
        "add-price": "0.50"
      },
      "l": {
        "size": "200 g",
        "add-price": "1.00"
      }
    },
    "additives": [
      {
        "name": "Berries",
        "add-price": "0.50"
      },
      {
        "name": "Nuts",
        "add-price": "0.50"
      },
      {
        "name": "Jam",
        "add-price": "0.50"
      }
    ]
  },

  {
    "name": "Cheesecakes",
    "description": "Soft cottage cheese pancakes with sour cream and fresh berries and sprinkled with powdered sugar",
    "price": "4.50",
    "category": "dessert",
    "sizes": {
      "s": {
        "size": "50 g",
        "add-price": "0.00"
      },
      "m": {
        "size": "100 g",
        "add-price": "0.50"
      },
      "l": {
        "size": "200 g",
        "add-price": "1.00"
      }
    },
    "additives": [
      {
        "name": "Berries",
        "add-price": "0.50"
      },
      {
        "name": "Nuts",
        "add-price": "0.50"
      },
      {
        "name": "Jam",
        "add-price": "0.50"
      }
    ]
  },

  {
    "name": "Creme brulee",
    "description": "Delicate creamy dessert in a caramel basket with wild berries",
    "price": "4.00",
    "category": "dessert",
    "sizes": {
      "s": {
        "size": "50 g",
        "add-price": "0.00"
      },
      "m": {
        "size": "100 g",
        "add-price": "0.50"
      },
      "l": {
        "size": "200 g",
        "add-price": "1.00"
      }
    },
    "additives": [
      {
        "name": "Berries",
        "add-price": "0.50"
      },
      {
        "name": "Nuts",
        "add-price": "0.50"
      },
      {
        "name": "Jam",
        "add-price": "0.50"
      }
    ]
  },

  {
    "name": "Pancakes",
    "description": "Tender pancakes with strawberry jam and fresh strawberries",
    "price": "4.50",
    "category": "dessert",
    "sizes": {
      "s": {
        "size": "50 g",
        "add-price": "0.00"
      },
      "m": {
        "size": "100 g",
        "add-price": "0.50"
      },
      "l": {
        "size": "200 g",
        "add-price": "1.00"
      }
    },
    "additives": [
      {
        "name": "Berries",
        "add-price": "0.50"
      },
      {
        "name": "Nuts",
        "add-price": "0.50"
      },
      {
        "name": "Jam",
        "add-price": "0.50"
      }
    ]
  },

  {
    "name": "Honey cake",
    "description": "Classic honey cake with delicate custard",
    "price": "4.50",
    "category": "dessert",
    "sizes": {
      "s": {
        "size": "50 g",
        "add-price": "0.00"
      },
      "m": {
        "size": "100 g",
        "add-price": "0.50"
      },
      "l": {
        "size": "200 g",
        "add-price": "1.00"
      }
    },
    "additives": [
      {
        "name": "Berries",
        "add-price": "0.50"
      },
      {
        "name": "Nuts",
        "add-price": "0.50"
      },
      {
        "name": "Jam",
        "add-price": "0.50"
      }
    ]
  },

  {
    "name": "Chocolate cake",
    "description": "Cake with hot chocolate filling and nuts with dried apricots",
    "price": "5.50",
    "category": "dessert",
    "sizes": {
      "s": {
        "size": "50 g",
        "add-price": "0.00"
      },
      "m": {
        "size": "100 g",
        "add-price": "0.50"
      },
      "l": {
        "size": "200 g",
        "add-price": "1.00"
      }
    },
    "additives": [
      {
        "name": "Berries",
        "add-price": "0.50"
      },
      {
        "name": "Nuts",
        "add-price": "0.50"
      },
      {
        "name": "Jam",
        "add-price": "0.50"
      }
    ]
  },

  {
    "name": "Black forest",
    "description": "A combination of thin sponge cake with cherry jam and light chocolate mousse",
    "price": "6.50",
    "category": "dessert",
    "sizes": {
      "s": {
        "size": "50 g",
        "add-price": "0.00"
      },
      "m": {
        "size": "100 g",
        "add-price": "0.50"
      },
      "l": {
        "size": "200 g",
        "add-price": "1.00"
      }
    },
    "additives": [
      {
        "name": "Berries",
        "add-price": "0.50"
      },
      {
        "name": "Nuts",
        "add-price": "0.50"
      },
      {
        "name": "Jam",
        "add-price": "0.50"
      }
    ]
  }
]

const tea = [

  {
    "name": "Moroccan",
    "description": "Fragrant black tea with the addition of tangerine, cinnamon, honey, lemon and mint",
    "price": "4.50",
    "category": "tea",
    "sizes": {
      "s": {
        "size": "200 ml",
        "add-price": "0.00"
      },
      "m": {
        "size": "300 ml",
        "add-price": "0.50"
      },
      "l": {
        "size": "400 ml",
        "add-price": "1.00"
      }
    },
    "additives": [
      {
        "name": "Sugar",
        "add-price": "0.50"
      },
      {
        "name": "Lemon",
        "add-price": "0.50"
      },
      {
        "name": "Syrup",
        "add-price": "0.50"
      }
    ]
  },

  {
    "name": "Ginger",
    "description": "Original black tea with fresh ginger, lemon and honey",
    "price": "5.00",
    "category": "tea",
    "sizes": {
      "s": {
        "size": "200 ml",
        "add-price": "0.00"
      },
      "m": {
        "size": "300 ml",
        "add-price": "0.50"
      },
      "l": {
        "size": "400 ml",
        "add-price": "1.00"
      }
    },
    "additives": [
      {
        "name": "Sugar",
        "add-price": "0.50"
      },
      {
        "name": "Lemon",
        "add-price": "0.50"
      },
      {
        "name": "Syrup",
        "add-price": "0.50"
      }
    ]
  },

  {
    "name": "Cranberry",
    "description": "Invigorating black tea with cranberry and honey",
    "price": "5.00",
    "category": "tea",
    "sizes": {
      "s": {
        "size": "200 ml",
        "add-price": "0.00"
      },
      "m": {
        "size": "300 ml",
        "add-price": "0.50"
      },
      "l": {
        "size": "400 ml",
        "add-price": "1.00"
      }
    },
    "additives": [
      {
        "name": "Sugar",
        "add-price": "0.50"
      },
      {
        "name": "Lemon",
        "add-price": "0.50"
      },
      {
        "name": "Syrup",
        "add-price": "0.50"
      }
    ]
  },

  {
    "name": "Sea buckthorn",
    "description": "Toning sweet black tea with sea buckthorn, fresh thyme and cinnamon",
    "price": "5.50",
    "category": "tea",
    "sizes": {
      "s": {
        "size": "200 ml",
        "add-price": "0.00"
      },
      "m": {
        "size": "300 ml",
        "add-price": "0.50"
      },
      "l": {
        "size": "400 ml",
        "add-price": "1.00"
      }
    },
    "additives": [
      {
        "name": "Sugar",
        "add-price": "0.50"
      },
      {
        "name": "Lemon",
        "add-price": "0.50"
      },
      {
        "name": "Syrup",
        "add-price": "0.50"
      }
    ]
  }
]



//Burger

let burgerList = document.querySelectorAll('.burger_list')

function menuBurger() {
  burger_wrapper.classList.toggle('active_burger')
  burger_nav.classList.toggle('active_burger')
  document.body.classList.toggle('lock')
  burger_menu.classList.toggle('burger_active')
  header.classList.toggle('header_active')
}

burgerList.forEach(item => {
  item.addEventListener('click', () => {
    burger_wrapper.classList.remove('active_burger')
    burger_nav.classList.remove('active_burger')
    document.body.classList.remove('lock')
    burger_menu.classList.remove('burger_active')
    header.classList.remove('header_active')
  })
});

burger_button.addEventListener('click', menuBurger)


// button tabs

let tabs = document.getElementsByClassName('but_tabs');

function active_tubs(e, tab) {

  for (let index = 0; index < tabs.length; index++) {
    tabs[index].classList.forEach(item => {
      if (item == 'active') tabs[index].classList.remove('active')
    });
  }
  products(tab)
  e.classList.add('active')
}


//Products


let product_tab = 'coffee';
let prod = []


function products(e) {

  grid.innerHTML = ''
  switch (e) {
    case 'coffee':
      prod = coffee
      grid.classList.remove('grid_tea')
      grid.classList.add('grid')
      product_tab = 'coffee'
      break;
    case 'tea':
      prod = tea
      grid.classList.remove('grid')
      grid.classList.add('grid_tea')
      product_tab = 'tea'

      break;
    case 'dessert':
      prod = dessert
      grid.classList.remove('grid_tea')
      grid.classList.add('grid')
      product_tab = 'dessert'

      break;
    default:
      break;
  }

  for (let index = 0; index < prod.length; index++) {
    grid.innerHTML += `<div id="${index}" class="grid_item" onclick="modalopen(this)">
    <div class="grid_img" >
        <img src="images/${e}/${e}-${index + 1}.png" alt="">
    </div>
    <div class="desc">
        <div class="title">
            <h3>${prod[index].name}</h3>
            <p>${prod[index].description}</p>
        </div>
        <span>$${prod[index].price}</span>
    </div>
</div>`;
  }
  modaInit()
}
products(product_tab)


// Modal


function modaInit() {
  let gridItem = document.querySelectorAll('.grid_item')
  gridItem.forEach(item => {
    item.addEventListener('click', () => {
      modal_wrapper.classList.add('modal_active')
      document.body.classList.add('lock')
    });
  });
}

function activeTabsModal() {

  let modalTabs = document.querySelectorAll('.but_size')

  return modalTabs.forEach(item => {
    let arrItem = item
    for (let index = 0; index < arrItem.classList.length; index++) {
      if (arrItem.classList[index] == 'active_but_size') {
        arrItem.classList.remove('active_but_size')
      };
    }
  });

}

let count = 0
let summ = 0
function sizeCalc(e, init, product) {
  count = 0
  activeTabsModal();
  init.classList.add('active_but_size')
  summ = summTotal(parseFloat(prod[product].sizes[e]['add-price']), parseFloat(prod[product].price))

  let arr = document.getElementsByClassName('additives_tabs')

  for (let index = 0; index < arr.length; index++) {
    arr[index].classList.forEach(item => {
      if (item == 'active_but_size') {
        arr[index].classList.remove('active_but_size')
      }
    })
  }

  totalPrice.innerHTML = '$' + summTotal(parseFloat(prod[product].sizes[e]['add-price']), parseFloat(prod[product].price))
}



function additivesCalc(init, e, product) {

  init.classList.toggle('active_but_size')

  if (String(init.classList.value).indexOf('active_but_size') > 0) {
    count += parseFloat(prod[product].additives[e]['add-price'])
  } else {
    count -= parseFloat(prod[product].additives[e]['add-price'])
  }

  totalPrice.innerHTML = '$' + (parseFloat(summ) + parseFloat(count)).toFixed(2)

}

function summTotal(a, b) {

  return (a + b).toFixed(2)

}


function modalopen(e) {
  let total = summTotal(parseFloat(prod[e.id].price), parseFloat(prod[e.id].sizes['s']['add-price']))
  let img = Number(e.id) + 1
  modal_wrapper.innerHTML = `
  <div class="modal"><img src="images/${product_tab}/${product_tab}-${img}.png" alt="">
                <div class="modal_desc">
                    <div class="title_modal">
                    <h3>${prod[e.id].name}</h3>
                    <p>${prod[e.id].description}</p>
                </div>
                <div class="size">
                    <p>Size</p>
                    <div class="modal_tabs">
                        <div id="but_size_1" class="but_size active_but_size" onclick="sizeCalc('s', this, ${e.id})"><p>S</p><span>200 ml</span></div>
                        <div id="but_size_2" class="but_size"  onclick="sizeCalc('m', this, ${e.id})"><p>M</p><span>300 ml</span></div>
                        <div id="but_size_3" class="but_size" onclick="sizeCalc('l', this, ${e.id})"><p>L</p><span>400 ml</span></div>
                    </div>
                </div>
                <div class="additives">
                    <p>Additives</p>
                    <div class="modal_tabs">
                        <div class="additives_tabs" onclick="additivesCalc(this, '0', ${e.id})"><p>1</p><span>Sugar</span></div>
                        <div class="additives_tabs" onclick="additivesCalc(this, '1', ${e.id})"><p>2</p><span>Cinnamon</span></div>
                        <div class="additives_tabs" onclick="additivesCalc(this, '2', ${e.id})"><p>3</p><span>Syrup</span></div>
                    </div>
                </div>
                <div class="total">
                    <p>Total:</p>
                    <p id="totalPrice">$${total}</p>
                </div>
                <div class="alert">
                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16"
                        fill="none">
                        <g clip-path="url(#clip0_268_9737)">
                            <path d="M8 7.66663V11" stroke="#403F3D" stroke-linecap="round" stroke-linejoin="round" />
                            <path d="M8 5.00667L8.00667 4.99926" stroke="#403F3D" stroke-linecap="round"
                                stroke-linejoin="round" />
                            <path
                                d="M8.00016 14.6667C11.6821 14.6667 14.6668 11.6819 14.6668 8.00004C14.6668 4.31814 11.6821 1.33337 8.00016 1.33337C4.31826 1.33337 1.3335 4.31814 1.3335 8.00004C1.3335 11.6819 4.31826 14.6667 8.00016 14.6667Z"
                                stroke="#403F3D" stroke-linecap="round" stroke-linejoin="round" />
                        </g>
                        <defs>
                            <clipPath id="clip0_268_9737">
                                <rect width="16" height="16" fill="white" />
                            </clipPath>
                        </defs>
                    </svg>
                    <p>The cost is not final. Download our mobile app to see the final price and place your order. Earn
                        loyalty points and enjoy your favorite coffee with up to 20% discount.</p>
                        </div> <button onclick="closeModal()" class="btn_modal">Close</button>
                        </div>
                        </div>`;
  sizeCalc('s', but_size_1, e.id)
}


function closeModal() {
  modal_wrapper.classList.remove('modal_active');
  document.body.classList.remove('lock');
}
modal_wrapper.addEventListener('click', (e) => {
  if (e.target === modal_wrapper) closeModal()
})